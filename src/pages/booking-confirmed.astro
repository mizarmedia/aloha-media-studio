---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
---

<Layout
  title="Booking Received! | Aloha Media Studio"
  description="Thank you for your studio booking request. We'll confirm your session shortly."
  noindex={true}
>
  <Header />

  <main class="pt-32 pb-24">
    <div class="max-w-3xl mx-auto px-6">
      <!-- Success Header -->
      <div class="text-center mb-12">
        <!-- Animated checkmark -->
        <div class="w-24 h-24 mx-auto mb-8 rounded-full bg-[var(--color-coral)]/20 flex items-center justify-center">
          <svg class="w-12 h-12 text-[var(--color-coral)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
        </div>

        <h1 class="text-4xl md:text-5xl font-bold text-[var(--color-cream)] mb-4">
          Thank You<span id="invitee-name-display"></span>!
        </h1>
        <p class="text-[var(--color-mist)] text-xl max-w-xl mx-auto">
          We're so excited you want to create with us. Your booking has been confirmed!
        </p>
      </div>

      <!-- Booking Details (populated by JavaScript from Calendly URL params) -->
      <div id="booking-details" class="hidden mb-8">
        <section class="p-6 bg-[var(--color-studio-blue)]/10 rounded-2xl border border-[var(--color-studio-blue)]/30">
          <h2 class="text-xl font-semibold text-[var(--color-cream)] mb-4 flex items-center gap-3">
            <svg class="w-6 h-6 text-[var(--color-studio-blue)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            Your Booking Details
          </h2>
          <div class="grid sm:grid-cols-2 gap-4 text-[var(--color-mist)]">
            <div>
              <p class="text-[var(--color-stone)] text-sm">Session</p>
              <p id="event-type" class="text-[var(--color-cream)] font-medium">—</p>
            </div>
            <div>
              <p class="text-[var(--color-stone)] text-sm">Date & Time</p>
              <p id="event-datetime" class="text-[var(--color-cream)] font-medium">—</p>
            </div>
            <div>
              <p class="text-[var(--color-stone)] text-sm">Confirmation Email Sent To</p>
              <p id="invitee-email" class="text-[var(--color-cream)] font-medium">—</p>
            </div>
            <div>
              <p class="text-[var(--color-stone)] text-sm">Duration</p>
              <p id="event-duration" class="text-[var(--color-cream)] font-medium">—</p>
            </div>
          </div>
        </section>
      </div>

      <!-- What's Next -->
      <div class="space-y-6">

        <!-- Confirmation Notice -->
        <section class="p-6 bg-[var(--color-coral)]/10 rounded-2xl border border-[var(--color-coral)]/30">
          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-full bg-[var(--color-coral)]/20 flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-[var(--color-coral)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h2 class="text-xl font-semibold text-[var(--color-cream)] mb-2">
                You're All Set!
              </h2>
              <p class="text-[var(--color-mist)]">
                Your session is confirmed and on the calendar. Check your email for the confirmation with all the details you'll need, including studio access instructions.
              </p>
            </div>
          </div>
        </section>

        <!-- What Happens Next -->
        <section class="p-6 bg-[var(--color-charcoal)] rounded-2xl border border-[var(--color-graphite)]">
          <h2 class="text-2xl font-bold text-[var(--color-cream)] mb-6 flex items-center gap-3">
            <span class="w-8 h-8 rounded-full bg-[var(--color-coral)]/20 flex items-center justify-center text-[var(--color-coral)] text-sm font-bold">1</span>
            What Happens Next
          </h2>
          <ul class="text-[var(--color-mist)] space-y-4">
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 text-[var(--color-coral)] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              <span>Check your email for the confirmation with calendar invite and studio details</span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 text-[var(--color-coral)] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
              </svg>
              <span>Review the <a href="/studio-agreement" class="text-[var(--color-coral)] hover:underline">studio agreement</a> before your session</span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 text-[var(--color-coral)] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              <span>Show up at the scheduled time ready to create something amazing</span>
            </li>
          </ul>
        </section>

        <!-- Need More Time or Have Questions -->
        <section class="p-6 bg-[var(--color-charcoal)] rounded-2xl border border-[var(--color-graphite)]">
          <h2 class="text-2xl font-bold text-[var(--color-cream)] mb-6 flex items-center gap-3">
            <span class="w-8 h-8 rounded-full bg-[var(--color-coral)]/20 flex items-center justify-center text-[var(--color-coral)] text-sm font-bold">2</span>
            Need to Make Changes?
          </h2>
          <ul class="text-[var(--color-mist)] space-y-4">
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 text-[var(--color-coral)] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
              <span><strong class="text-[var(--color-cream)]">Want to book additional time?</strong> <a href="/studio#booking" class="text-[var(--color-coral)] hover:underline">Book another session</a></span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 text-[var(--color-coral)] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
              </svg>
              <span><strong class="text-[var(--color-cream)]">Missing details or need to update your booking?</strong> Reply to your confirmation email or <a href="/#contact" class="text-[var(--color-coral)] hover:underline">contact us directly</a></span>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-5 h-5 text-[var(--color-coral)] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
              </svg>
              <span><strong class="text-[var(--color-cream)]">Special requests or questions about equipment?</strong> Let us know ahead of time so we can prepare</span>
            </li>
          </ul>
        </section>

        <!-- Contact Card -->
        <section class="p-6 bg-[var(--color-charcoal)] rounded-2xl border border-[var(--color-graphite)]">
          <h2 class="text-2xl font-bold text-[var(--color-cream)] mb-6 flex items-center gap-3">
            <span class="w-8 h-8 rounded-full bg-[var(--color-coral)]/20 flex items-center justify-center text-[var(--color-coral)] text-sm font-bold">3</span>
            Get In Touch
          </h2>
          <div class="grid sm:grid-cols-2 gap-4">
            <a
              href="mailto:connect@alohamediastudio.com"
              class="flex items-center gap-4 p-4 bg-[var(--color-void)] rounded-xl hover:bg-[var(--color-void)]/80 transition-colors group"
            >
              <div class="w-10 h-10 rounded-full bg-[var(--color-coral)]/10 flex items-center justify-center group-hover:bg-[var(--color-coral)]/20 transition-colors">
                <svg class="w-5 h-5 text-[var(--color-coral)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
              </div>
              <div>
                <p class="text-[var(--color-stone)] text-sm">Email us</p>
                <p class="text-[var(--color-cream)] font-medium">connect@alohamediastudio.com</p>
              </div>
            </a>
            <a
              href="/#contact"
              class="flex items-center gap-4 p-4 bg-[var(--color-void)] rounded-xl hover:bg-[var(--color-void)]/80 transition-colors group"
            >
              <div class="w-10 h-10 rounded-full bg-[var(--color-coral)]/10 flex items-center justify-center group-hover:bg-[var(--color-coral)]/20 transition-colors">
                <svg class="w-5 h-5 text-[var(--color-coral)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
              </div>
              <div>
                <p class="text-[var(--color-stone)] text-sm">Contact form</p>
                <p class="text-[var(--color-cream)] font-medium">Send us a message</p>
              </div>
            </a>
          </div>
        </section>

        <!-- Excitement Banner -->
        <div class="p-8 bg-gradient-to-br from-[var(--color-coral)]/20 to-[var(--color-coral)]/5 rounded-2xl border border-[var(--color-coral)]/30 text-center">
          <p class="text-2xl font-semibold text-[var(--color-cream)] mb-2">
            We can't wait to see what you create!
          </p>
          <p class="text-[var(--color-mist)]">
            The studio is ready. Now let's make something amazing together.
          </p>
        </div>

        <!-- Back to Site -->
        <div class="text-center pt-4">
          <a
            href="/"
            class="inline-flex items-center gap-2 text-[var(--color-coral)] hover:text-[var(--color-coral-light)] transition-colors"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            Back to Aloha Media Studio
          </a>
        </div>

      </div>
    </div>
  </main>

  <Footer />

  <script>
    // Parse Calendly URL parameters and display booking details
    document.addEventListener('DOMContentLoaded', function() {
      const params = new URLSearchParams(window.location.search);

      const inviteeName = params.get('invitee_full_name');
      const inviteeEmail = params.get('invitee_email');
      const eventType = params.get('event_type_name');
      const eventStart = params.get('event_start_time');
      const eventEnd = params.get('event_end_time');

      // Only show booking details if we have Calendly params
      if (inviteeName || eventType || eventStart) {
        const detailsSection = document.getElementById('booking-details');
        if (detailsSection) {
          detailsSection.classList.remove('hidden');
        }

        // Display invitee name in header
        if (inviteeName) {
          const nameDisplay = document.getElementById('invitee-name-display');
          if (nameDisplay) {
            const firstName = inviteeName.split(' ')[0];
            nameDisplay.textContent = `, ${firstName}`;
          }
        }

        // Display event type
        if (eventType) {
          const eventTypeEl = document.getElementById('event-type');
          if (eventTypeEl) {
            eventTypeEl.textContent = decodeURIComponent(eventType);
          }
        }

        // Display invitee email
        if (inviteeEmail) {
          const emailEl = document.getElementById('invitee-email');
          if (emailEl) {
            emailEl.textContent = decodeURIComponent(inviteeEmail);
          }
        }

        // Format and display date/time
        if (eventStart) {
          const startDate = new Date(eventStart);
          const options = {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: 'numeric',
            minute: '2-digit',
            timeZoneName: 'short'
          };
          const datetimeEl = document.getElementById('event-datetime');
          if (datetimeEl) {
            datetimeEl.textContent = startDate.toLocaleDateString('en-US', options);
          }
        }

        // Calculate and display duration
        if (eventStart && eventEnd) {
          const start = new Date(eventStart);
          const end = new Date(eventEnd);
          const durationMs = end - start;
          const durationHours = Math.round(durationMs / (1000 * 60 * 60) * 10) / 10;
          const durationEl = document.getElementById('event-duration');
          if (durationEl) {
            if (durationHours === 1) {
              durationEl.textContent = '1 Hour';
            } else {
              durationEl.textContent = `${durationHours} Hours`;
            }
          }
        }
      }
    });
  </script>
</Layout>
